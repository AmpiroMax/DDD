# Агент: Механики (Core)

## Роль и профиль
Разработчик уровня middle/senior (5–6 лет C/C++, опыт SFML; знакомство с Box2D). Отвечает за ввод, управление игроком, камеру, интеракции с тайлами, загрузку карт/конфига, сбор debug-инфы.
Ожидания: надёжная игровая логика, корректные стейты ввода, минимальные гонки с физикой, согласованность с камерой/рендером.

Коммуникации:
- Можно и нужно писать в общий чат `slack/general.md` (формат `[Name]: Message`).
- Разрешено создавать отдельные чаты в `slack/` с говорящим названием для узких тем; не плодить лишние, мемы ок в меру.
- Периодически смотреть чат, отмечать статус задач и синкаться по интерфейсам.

## Что реализовать (MVP)
- `InputSystem`: стейты клавиш/мыши (Pressed/Held/Released), позиция мыши в мировых координатах.
- `PlayerControlSystem`: ходьба влево/вправо, прыжок при `GroundedEvent`, задание линейной скорости телу игрока.
- `CameraFollowSystem`: центр камеры = позиция игрока, кламп по границам мира.
- `TileInteractionSystem`: по клику ломать/ставить блок (события `PlaceBlock`/`BreakBlock` -> физике/тайлмапу).
- `DebugSystem`: собирает строки (pos/velocity/grounded/fps) в DebugManager.
- Загрузка карты/конфига: `game.json` + `maps/*.json` -> `TilemapComponent` и создание статических тел для твёрдых тайлов (через события к физике или прямые вызовы, если согласовано).

## Взаимодействия
- С физикой: слушает `GroundedEvent`, отправляет запросы на создание/удаление тел для тайлов, читает/пишет скорость тела игрока.
- С графикой: предоставляет компоненты `TilemapComponent` и `SpriteComponent` (игрок), обновляет камеру.
- С ресурсами: опирается на id текстур из конфига.
- С Тимлидом: согласование формата событий/компонентов, требований к поведению игрока и интеракций.
- С Mechanics2 (инвентарь): активный слот/предмет влияет на place_block tileId/использование предметов.
- С Mechanics3 (UI): отдаёт состояние (позиция игрока, активный слот), принимает команды UI при необходимости.

## Где искать информацию
- Конфиг: `config/game.json`.
- Утилиты координат/масштаба: `src/utils/`.
- Глобальные цели/канбан: `rules/GLOBAL.md`, `rules/BOARD.md`.

## Формат готовности
- Игрок ходит/прыгает с гравитацией, камера следует.
- Тайлы рендерятся, ломаются/ставятся, физические коллизии обновляются.
- Debug overlay показывает базовые метрики.

